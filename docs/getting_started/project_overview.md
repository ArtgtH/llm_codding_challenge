# Обзор проекта

Этот проект представляет собой автоматизированную систему обработки сельскохозяйственных отчетов через сообщения Telegram. Она извлекает структурированные данные из сельскохозяйственных отчетов в свободной форме, анализирует их с помощью ИИ и сохраняет результаты в электронных таблицах Excel, которые затем загружаются в Google Drive.

## Архитектура

Система состоит из двух основных компонентов:

1. **Telegram-бот (`tg_bot`)**: Получает сообщения от пользователей в сельскохозяйственных групповых чатах
2. **Сервис-обработчик (`worker`)**: Обрабатывает сообщения с помощью ИИ, извлекает структурированные данные и загружает файлы в Google Drive

Эти компоненты взаимодействуют через RabbitMQ и используют PostgreSQL для хранения данных.

## Рабочий процесс

1. Пользователь отправляет сообщение в чат Telegram, где присутствует бот
2. Бот захватывает сообщение и:
   - Отправляет его в очередь RabbitMQ
   - Сохраняет его в базе данных PostgreSQL
   - Сбрасывает таймер неактивности для чата
3. Сервис-обработчик:
   - Получает сообщения из очереди RabbitMQ
   - Обрабатывает текст сообщения с помощью Mistral AI для извлечения данных о сельскохозяйственных операциях
   - Сохраняет исходное сообщение как документ Word в Google Drive
   - Обновляет электронную таблицу Excel извлеченными данными
   - Загружает электронную таблицу Excel в Google Drive
   - Сохраняет отчет Excel в PostgreSQL

## Возможности

- **Обработка сообщений**: Извлекает структурированные сельскохозяйственные данные из неформальных текстовых сообщений
- **Автоматическое создание документов**: Создает документы Word и электронные таблицы Excel на основе содержимого сообщений
- **Интеграция с Google Drive**: Автоматически загружает и организует документы в командных папках
- **Обнаружение неактивности**: Отслеживает активность чата и может выполнять действия после периодов неактивности
- **Хранение в базе данных**: Поддерживает записи сообщений и созданных отчетов
- **Масштабируемая архитектура**: Микросервисная архитектура с контейнеризированными компонентами 